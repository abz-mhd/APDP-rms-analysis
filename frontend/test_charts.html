<!DOCTYPE html>
<html>
<head>
    <title>Chart Test</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h1>Chart Test Page</h1>
    <div id="testChart" style="height: 400px;"></div>
    
    <script>
        // Test if Plotly is loaded
        console.log('Plotly loaded:', typeof Plotly !== 'undefined');
        
        // Test chart rendering
        fetch('/charts/peak-dining')
            .then(response => response.json())
            .then(charts => {
                console.log('Charts received:', charts);
                
                if (charts.daily_patterns) {
                    const chartData = JSON.parse(charts.daily_patterns);
                    console.log('Chart data:', chartData);
                    
                    Plotly.newPlot('testChart', chartData.data, chartData.layout, {
                        responsive: true,
                        displayModeBar: false
                    }).then(() => {
                        console.log('Chart rendered successfully!');
                    }).catch(error => {
                        console.error('Chart rendering error:', error);
                    });
                } else {
                    console.error('No daily_patterns chart found');
                }
            })
            .catch(error => {
                console.error('Error fetching charts:', error);
            });
    </script>
</body>
</html>